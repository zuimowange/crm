<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>秉信科技</title>
		<base th:href="${baseHref}" href="http://127.0.0.1:8020/resources/static/" />
		<link rel="stylesheet" href="layui/css/layui.css" />
		<style>
			.layui-layout-admin .layui-body {
				bottom: 0 !important;
			}
			.layui-tab {
				margin: 0;
			}
			.layui-tab-content{
				padding: 10px;
			}
			.layui-tab-item{
				position: relative;
				bottom: 0;
			}
			
		</style>
	</head>

	<body class="layui-layout-body">
		<div class="layui-layout layui-layout-admin">
			<div class="layui-header">
				<div class="layui-logo">秉信科技</div>
				
				<ul class="layui-nav layui-layout-right">
					<li class="layui-nav-item">
						<a href="javascript:;">
							<img src="http://t.cn/RCzsdCq" class="layui-nav-img"> admin
						</a>
						<dl class="layui-nav-child">
							<dd>
								<a href="">基本资料</a>
							</dd>
							<dd>
								<a href="">修改密码</a>
							</dd>
						</dl>
					</li>
					<li class="layui-nav-item">
						<a href="javascript:;" id="signOut">退出登录</a>
					</li>
				</ul>
			</div>

			<div class="layui-side layui-bg-black">
				<div class="layui-side-scroll">
					<!-- 左侧导航区域（可配合layui已有的垂直导航） -->
					<ul class="layui-nav layui-nav-tree" lay-filter="test">
						<li class="layui-nav-item layui-nav-itemed">
							<a class="" href="javascript:;">账号管理</a>
							<dl class="layui-nav-child">
								<dd>
									<a href="javascript:;" class="link" lay-id="userList"  title="账号列表" url="/user/userList">账号列表</a>
								</dd>
							</dl>
						</li>
						<li class="layui-nav-item">
							<a class="" href="javascript:;">角色管理</a>
							<dl class="layui-nav-child">
								<dd>
									<a href="javascript:;" class="link" lay-id="roleList"  title="角色列表" url="/role/roleList">角色列表</a>
								</dd>
								<dd>
									<a href="javascript:;">角色分配</a>
								</dd>
							</dl>
						</li>
						<li class="layui-nav-item">
							<a href="javascript:;">权限管理</a>
							<dl class="layui-nav-child">
								<dd>
									<a href="javascript:;" class="link" lay-id="JurisdictionList"  title="权限列表" url="/Jurisdiction/JurisdictionList">角色列表</a>
								</dd>
								<dd>
									<a href="javascript:;">权限分配角色</a>
								</dd>
							</dl>
						</li>
						<li class="layui-nav-item">
							<a href="">客户管理</a>
						</li>
						<li class="layui-nav-item">
							<a href="">产品管理</a>
						</li>
						<li class="layui-nav-item">
							<a href="">订单管理</a>
						</li>
						<li class="layui-nav-item">
							<a href="">工单管理</a>
						</li>
					</ul>
				</div>
			</div>

			<div class="layui-body">
				
				<div class="layui-tab layui-tab-card" lay-filter="demo" lay-allowclose="true">
					<ul class="layui-tab-title">
						<li class="layui-this" lay-id="11">网站设置</li>
						<li lay-id="22">用户管理</li>
					</ul>
					<div class="layui-tab-content">
						<div class="layui-tab-item layui-show">
							<iframe class="my_iframe" src="/role/roleList" frameborder="0" scrolling="no" width="100%"></iframe>
						</div>
						<div class="layui-tab-item">2</div>
					</div>
				</div>

			</div>
			
		</div>
		<script type="text/javascript" src="layui/layui.js"></script>
		<script type="text/javascript" src="js/pub/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="js/pub/cookie.js"></script>
		<script>
			console.log(CookieUtil.get("token"))
			//JavaScript代码区域
			layui.use('element', function() {
				var element = layui.element;
				var my_iframe_height = $(".layui-body").height();
				my_iframe_height -= 66;
				$(".my_iframe").height(my_iframe_height + 'px');
				
				/**
				 * 新增一个选项卡
				 */
				$(".link").click(function(){
					var lay_id = $(this).attr('lay-id');
					for(var i=0;i<$(".layui-tab-title li").length;i++){
						if($(".layui-tab-title li").eq(i).attr("lay-id") == lay_id){
							element.tabChange('demo', lay_id);
							return false;
						}
					}
					element.tabAdd('demo', {
				        title: $(this).attr('title') //用于演示
				        ,content: '<iframe class="my_iframe" src="'+$(this).attr('url')+'" frameborder="0" scrolling="no" width="100%" height="'+my_iframe_height+'px"></iframe>'
				        ,id: $(this).attr('lay-id') //实际使用一般是规定好的id，这里以时间戳模拟下
				      })
					element.tabChange('demo', $(this).attr('lay_id'));
				})
				
			});

			$(".link").click(function() {
				var my_link = $(this).attr("link");
				$("#my_iframe").attr("src", my_link);
			})

			$("#signOut").click(function() {
				CookieUtil.delete("token");
				location.href = "/user/login";
			})
		</script>
	</body>

</html>